<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload File</title>
    <script>
        function updateFileTypes() {
            const fileInput = document.getElementById('file');
            const dataType = document.querySelector('input[name="data-type"]:checked').value;

            if (dataType === 'structured') {
                fileInput.accept = '.csv, .xls, .xlsx, .png';
            } else {
                fileInput.accept = '.pdf, .doc, .docx, .json';
            }
        }

        function enableRunButton() {
            document.getElementById('run-button').disabled = false;
        }
    </script>
</head>
<body>
    <h1>Upload File to DBFS</h1>
    <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data" onsubmit="enableRunButton()">
        <label for="structured">
            <input type="radio" id="structured" name="data-type" value="structured" checked onclick="updateFileTypes()"> Structured Data
        </label>
        <label for="unstructured">
            <input type="radio" id="unstructured" name="data-type" value="unstructured" onclick="updateFileTypes()"> Unstructured Data
        </label>
        <br><br>
        <label for="file">Choose file:</label>
        <input type="file" id="file" name="file" required>
        <br><br>
        <button type="submit">Upload</button>
    </form>

    <br>
    <button id="run-button" onclick="window.location.href='/run-job'" disabled>Run Job</button>
</body>
</html>
